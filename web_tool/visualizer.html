<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="favicon.ico">

    <title>Microsoft AI for Earth - Land cover mapping platform</title>

    <!-- Core CSS -->
    <link href="css/leaflet.css" rel="stylesheet" />
    <link href="css/leaflet-slider.css" rel="stylesheet" />
    <link href="css/leaflet-sidebar.css" rel="stylesheet" />
    <link href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.4.14/leaflet.draw.css">
    <link href="css/noty.css" rel="stylesheet">

    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">
    

</head>

<body>

    <div id="map"></div>

    <div id="privacy" class="leaflet-container">
        <a href="https://privacy.microsoft.com/en-US/privacystatement" target="_blank">Privacy Statement</a>
    </div>

    <!-- Core JavaScript
    ================================================== -->
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/noty.js" type="text/javascript"></script>
    <script src="js/jscolor.js" type="text/javascript"></script>

    <!-- Leaflet JavaScript
    ================================================== -->
    <script src="js/leaflet.js" type="text/javascript"></script>
    <script src="js/leaflet-slider.js" type="text/javascript"></script>
    <script src="js/leaflet-sidebar.min.js" type="text/javascript"></script>
    <script src="js/leaflet.filelayer.js" type="text/javascript"></script>
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.4.14/leaflet.draw.js" type="text/javascript"></script>

    <!-- Application JavaScript
    ================================================== -->
    <script src="js/components.js" type="text/javascript"></script>
    <script src="js/handlers.js" type="text/javascript"></script>
    <script src="js/utils.js" type="text/javascript"></script>
    <script src="js/globals.js" type="text/javascript"></script>

    <script type="text/javascript">
        
        var tileObjects = {
            "nv_2013_rgb": {
                "name": "NAIP 2013",
                "tileLayer": L.tileLayer('http://msrcalebgeoserver.eastus.cloudapp.azure.com:8080/geoserver/gwc/service/wmts?layer=local:nv_2013_rgb&style=&tilematrixset=EPSG:3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image/jpeg&TileMatrix=EPSG:3857:{z}&TileCol={x}&TileRow={y}', {
                    tms: false,
                    minZoom: 8,
                    maxNativeZoom: 18,
                    maxZoom: 20,
                    attribution: 'Georeferenced Image'
                })   
            },
            "nv_2017_rgb": {
                "name": "NAIP 2017",
                "tileLayer": L.tileLayer('http://msrcalebgeoserver.eastus.cloudapp.azure.com:8080/geoserver/gwc/service/wmts?layer=local:nv_2017_rgb&style=&tilematrixset=EPSG:3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image/jpeg&TileMatrix=EPSG:3857:{z}&TileCol={x}&TileRow={y}', {
                    tms: false,
                    minZoom: 8,
                    maxNativeZoom: 18,
                    maxZoom: 20,
                    attribution: 'Georeferenced Image'
                })   
            },
            "nv_embed_selfsim_2013": {
                "name": "NLCD SelfSim Embedding 2013",
                "tileLayer": L.tileLayer('http://msrcalebgeoserver.eastus.cloudapp.azure.com:8080/geoserver/gwc/service/wmts?layer=local:nv_embed_selfsim_2013&style=&tilematrixset=EPSG:3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image/jpeg&TileMatrix=EPSG:3857:{z}&TileCol={x}&TileRow={y}', {
                    tms: false,
                    minZoom: 8,
                    maxNativeZoom: 18,
                    maxZoom: 20,
                    attribution: 'Georeferenced Image'
                })   
            },
            "nv_embed_selfsim_2017": {
                "name": "NLCD SelfSim Embedding 2017",
                "tileLayer": L.tileLayer('http://msrcalebgeoserver.eastus.cloudapp.azure.com:8080/geoserver/gwc/service/wmts?layer=local:nv_embed_selfsim_2017&style=&tilematrixset=EPSG:3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image/jpeg&TileMatrix=EPSG:3857:{z}&TileCol={x}&TileRow={y}', {
                    tms: false,
                    minZoom: 8,
                    maxNativeZoom: 18,
                    maxZoom: 20,
                    attribution: 'Georeferenced Image'
                })   
            },
            "nv_embed_2013": {
                "name": "NLCD Old Embedding 2013",
                "tileLayer": L.tileLayer('http://msrcalebgeoserver.eastus.cloudapp.azure.com:8080/geoserver/gwc/service/wmts?layer=local:nv_embed_2013&style=&tilematrixset=EPSG:3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image/jpeg&TileMatrix=EPSG:3857:{z}&TileCol={x}&TileRow={y}', {
                    tms: false,
                    minZoom: 8,
                    maxNativeZoom: 18,
                    maxZoom: 20,
                    attribution: 'Georeferenced Image'
                })   
            },
            "nv_embed_2017": {
                "name": "NLCD Old Embedding 2017",
                "tileLayer": L.tileLayer('http://msrcalebgeoserver.eastus.cloudapp.azure.com:8080/geoserver/gwc/service/wmts?layer=local:nv_embed_2017&style=&tilematrixset=EPSG:3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image/jpeg&TileMatrix=EPSG:3857:{z}&TileCol={x}&TileRow={y}', {
                    tms: false,
                    minZoom: 8,
                    maxNativeZoom: 18,
                    maxZoom: 20,
                    attribution: 'Georeferenced Image'
                })   
            },
            "nv_nlcd_old": {
                "name": "NLCD Old Embedding 2017",
                "tileLayer": L.tileLayer('http://msrcalebgeoserver.eastus.cloudapp.azure.com:8080/geoserver/gwc/service/wmts?layer=local:nv_nlcd_old&style=&tilematrixset=EPSG:3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image/jpeg&TileMatrix=EPSG:3857:{z}&TileCol={x}&TileRow={y}', {
                    tms: false,
                    minZoom: 8,
                    maxNativeZoom: 18,
                    maxZoom: 20,
                    attribution: 'Georeferenced Image'
                })   
            }
        };
        


        //----------------------------------------------------------------------
        // Runtime entrance
        //----------------------------------------------------------------------
        $(document).ready(function(){

            baseMaps = Object()
            baseMaps["NAIP 2013"] = tileObjects["nv_2013_rgb"]["tileLayer"];
            baseMaps["NAIP 2017"] = tileObjects["nv_2017_rgb"]["tileLayer"];

            baseMaps["Old Embedded NLCD 2013"] = tileObjects["nv_embed_2013"]["tileLayer"];
            baseMaps["Old Embedded NLCD 2017"] = tileObjects["nv_embed_2017"]["tileLayer"];

            baseMaps["New Embedded NLCD 2013"] = tileObjects["nv_embed_selfsim_2013"]["tileLayer"];
            baseMaps["New Embedded NLCD 2017"] = tileObjects["nv_embed_selfsim_2017"]["tileLayer"];
            
            baseMaps["NLCD Ground Truth"] = tileObjects["nv_nlcd_old"]["tileLayer"];

            baseMaps["OpenStreetMap"] = getOSMLayer();
            baseMaps["'Google Earth' like Imagery"] = getESRILayer();


            var initialLayers = [
                baseMaps["OpenStreetMap"]
            ];

            // Setup the global map object
            gMap = L.map('map', {
                zoomControl: false,
                crs: L.CRS.EPSG3857, // this is the projection CRS (EPSG:3857), but it is different than the data CRS (EPSG:4326). See https://gis.stackexchange.com/questions/225765/leaflet-map-crs-is-3857-but-coordinates-4326/225786.
                center: [ 36.568, -114.475 ],
                zoom: 10,
                keyboard: false,
                //minZoom: baseLayer.options.minZoom,
                layers: initialLayers
            });

            var basemapLayerControl = L.control.layers(
                baseMaps, null, {
                    collapsed:false,
                    position:"bottomleft"
                }
            ).addTo(gMap);
    

        });

    </script>
</body>

</html>
